<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Delayed Command Response · Slack Framework</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&gt; Slack Command Reference: https://api.slack.com/slash-commands"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Delayed Command Response · Slack Framework"/><meta property="og:type" content="website"/><meta property="og:url" content="https://slackframework.com/"/><meta property="og:description" content="&gt; Slack Command Reference: https://api.slack.com/slash-commands"/><meta property="og:image" content="https://slackframework.com/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://slackframework.com/img/undraw_tweetstorm.svg"/><link rel="shortcut icon" href="/img/logo.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo.png" alt="Slack Framework"/><h2 class="headerTitleWithLogo">Slack Framework</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/getting_started_information" target="_self">Docs</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Slack Response</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/getting_started_information">About Slack Framework</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Installation</h4><ul><li class="navListItem"><a class="navItem" href="/docs/getting_started_installation">Package Installation (Unavailable)</a></li><li class="navListItem"><a class="navItem" href="/docs/app_info_set_up">Slack App Credentials</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/getting_started_development">Local Development</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Security</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/security_signature">Verifying requests from slack</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Command</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/command_useful_tips">Creating a Slash Command</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Basics</h4><ul><li class="navListItem"><a class="navItem" href="/docs/command_hello_world">Simple Command - Hello World!</a></li><li class="navListItem"><a class="navItem" href="/docs/command_group">Group Command</a></li><li class="navListItem"><a class="navItem" href="/docs/command_payload">Command Payload</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Slack Response</h4><ul><li class="navListItem"><a class="navItem" href="/docs/command_immediate_response">Immediate Command Response</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/command_delayed_response">Delayed Command Response</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Interactive</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/interactive_basics">Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/interactive_block_actions">Block Actions</a></li><li class="navListItem"><a class="navItem" href="/docs/interactive_dialog_submissions">Dialog Submissions</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Notification</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/notification_basics">Basics</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Dialog</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/dialogkit_basics">Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/dialogkit_elements">Elements</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Message</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/message_basics">Basics</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Block message</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/blockkit_basics">Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/blockkit_compositions">Composition Components</a></li><li class="navListItem"><a class="navItem" href="/docs/blockkit_divider">Dividers</a></li><li class="navListItem"><a class="navItem" href="/docs/blockkit_elements">Elements</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack API</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/api_basics">Command Getting Started</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack OAuth2</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/oauth2_basics">Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/oauth2_provider">Provider</a></li><li class="navListItem"><a class="navItem" href="/docs/oauth2_sing_in_slack">Sign in slack</a></li><li class="navListItem"><a class="navItem" href="/docs/oauth2_add_to_slack">Add to slack</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Webhooks</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/webhook_basics">Basics</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Slack Helper</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/helper_message_formatter">Message Formatter</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Delayed Command Response</h1></header><article><div><span><blockquote>
<p>Slack Command Reference: <a href="https://api.slack.com/slash-commands">https://api.slack.com/slash-commands</a></p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="sending-a-delayed-response"></a><a href="#sending-a-delayed-response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Sending a delayed response</h2>
<p>From Slack:</p>
<blockquote>
<p>Dealing with APIs isn't instant - when you receive the command data payload, your app might need to go off and query another API, and then fetch something from a database, or maybe just prompt the user for more information and await their response.</p>
</blockquote>
<blockquote>
<p>All these things take time, and when they're done, you might be outside of that 3000ms window for responding to the original request.</p>
</blockquote>
<p>If you check Slack Command payload, there is a field called <code>response_url</code> ( this field can be accessed by <code>$this-&gt;commandBody-&gt;getResponseUrl()</code>), this URL can be used to send responses after the 3000ms window has closed.</p>
<h2><a class="anchor" aria-hidden="true" id="feature"></a><a href="#feature" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Feature</h2>
<ul>
<li>The <code>response_url</code> can be used up to 5 times, within 30 minutes of the command being invoked. Just like a cake left around for 30 minutes will definitely be eaten, don't leave it too late.</li>
<li>One important note about this delayed response method is you must still send that initial HTTP 200 response within 3000ms. As before, that response can be empty, but we recommend that it contain a useful message, even if your actual response won't be sent until a few seconds later.</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="demo-delayed-response"></a><a href="#demo-delayed-response" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Demo - Delayed response</h2>
<p><img src="/docs/assets/command_delayed_message.gif" alt="Demo Hello World"></p>
<pre><code class="hljs css language-php">    ...
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">process</span><span class="hljs-params">()</span>
    </span>{

        <span class="hljs-keyword">$this</span>-&gt;respondToSlack(<span class="hljs-string">'Hey, Friend, this is the 1st one! :)'</span>);
        <span class="hljs-keyword">$this</span>-&gt;respondToSlack(<span class="hljs-string">'Hey, Friend, this is the 2nd one! :)'</span>);
        <span class="hljs-keyword">$this</span>-&gt;respondToSlack(<span class="hljs-string">'Hey, Friend, this is the 3rd one! :)'</span>);
        <span class="hljs-keyword">$this</span>-&gt;respondToSlack(<span class="hljs-string">'Hey, Friend, this is the 4th one! :)'</span>);
        <span class="hljs-keyword">$this</span>-&gt;respondToSlack(<span class="hljs-string">'Hey, Friend, this is the 5th one! :)'</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-string">'This is an immediate message!'</span>;
    }
    ...
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="usage"></a><a href="#usage" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Usage</h2>
<p>Slack Framework contains two handy functions for you to send delayed message.</p>
<pre><code class="hljs css language-php"> <span class="hljs-keyword">$this</span>-&gt;commandBody-&gt;respondToSlack(string $text);
 <span class="hljs-keyword">$this</span>-&gt;commandBody-&gt;respondToSlackWithMessage(SlackMessage $slackMessage);
</code></pre>
<p>Both functions use Laravel Notification behind the scene.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/command_immediate_response"><span class="arrow-prev">← </span><span>Immediate Command Response</span></a><a class="docs-next button" href="/docs/interactive_basics"><span>Basics</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#sending-a-delayed-response">Sending a delayed response</a></li><li><a href="#feature">Feature</a></li><li><a href="#demo-delayed-response">Demo - Delayed response</a></li><li><a href="#usage">Usage</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo.png" alt="Slack Framework" width="66" height="58"/></a><div><h5>Docs</h5><a href="/docs/en/doc1.html">Getting Started (or other categories)</a><a href="/docs/en/doc2.html">Guides (or other categories)</a><a href="/docs/en/doc3.html">API Reference (or other categories)</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="https://stackoverflow.com/questions/tagged/" target="_blank" rel="noreferrer noopener">Stack Overflow</a><a href="https://discordapp.com/">Project Chat</a><a href="https://twitter.com/" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="/blog">Blog</a><a href="https://github.com/">GitHub</a><a class="github-button" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://opensource.facebook.com/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2019 Your Name or Your Company Name</section></footer></div></body></html>